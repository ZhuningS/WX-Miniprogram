	var __wxAppData = {}; 	var __wxRoute; 	var __wxRouteBegin; 	var global = {}; 		define("utils/ald/ald-stat-conf.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
 !function(){"use strict";exports.app_key="1447ac5e3c1dfc5f92dd8a46bcf82ff0",exports.getLocation=!1,exports.getUserinfo=!1}(); 
 			}); 		define("utils/ald/ald-stat.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
 !function(){"use strict";function t(t,a,s){return a in t?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,t}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function s(t){var a=wx.getStorageSync("aldstat_uuid");return a||(a=""+Date.now()+Math.floor(1e7*Math.random()),wx.setStorageSync("aldstat_uuid",a),t.aldstat_is_first_open=!0),a}function e(){wx.request({url:"https://"+i+".aldwx.com/config/app_"+d.app_key+".json",header:{AldStat:"MiniApp-Stat"},method:"GET",success:function(t){if(200===t.statusCode)for(var a in t.data)wx.setStorageSync(a,t.data[a])}})}function o(t,a,s){if(t[a]){var e=t[a];t[a]=function(t){s.call(this,t,a),e.call(this,t)}}else t[a]=function(t){s.call(this,t,a)}}function n(t,a,s){if(t[a]){var e=t[a];t[a]=function(t){var o=e.call(this,t);return s.call(this,[t,o],a),o}}else t[a]=function(t){s.call(this,t,a)}}function r(t){this.app=t}function _(t){for(var a in t)return!1;return!0}var l="D3.99",i="logtestcalendar",d=require("./ald-stat-conf.js"),c=0,u=0,p=0,h=0,f=function(t){wx.login({success:function(a){wx.getUserInfo({success:function(a){t(a)}})}})},g=function(t,a,s){void 0===arguments[1]&&(a="GET"),void 0===arguments[2]&&(s="d.html");var e=0;!function o(){c+=1,t.rq_c=c,wx.request({url:"https://"+i+".aldwx.com/"+s,data:t,header:{AldStat:"MiniApp-Stat"},method:a,success:function(){},fail:function(){2>e&&(e++,t.retryTimes=e,o())}})}()},w=function(t,a,e,o){var n={ak:d.app_key,wsr:t.aldstat_showoption,uu:s(t),at:t.aldstat_access_token,ts:Date.now(),tp:e,ev:a,nt:t.aldstat_network_type,pm:t.aldstat_phone_model,pr:t.aldstat_pixel_ratio,ww:t.aldstat_window_width,wh:t.aldstat_window_height,lang:t.aldstat_language,wv:t.aldstat_wechat_version,lat:t.aldstat_lat,lng:t.aldstat_lng,spd:t.aldstat_speed,v:l};o&&(n.ct=o),t.aldstat_location_name&&(n.ln=t.aldstat_location_name),t.aldstat_src&&(n.sr=t.aldstat_src),t.aldstat_qr&&(n.qr=t.aldstat_qr),g(n,"GET","d.html")};r.prototype.debug=function(t){w(this.app,"debug",0,t)},r.prototype.warn=function(t){w(this.app,"debug",1,t)},r.prototype.error=function(t){w(this.app,"debug",2,t)},r.prototype.sendEvent=function(t,a){_(a)?w(this.app,"event",t):w(this.app,"event",t,JSON.stringify(a))};var v=function(){var t=this;t.aldstat_is_first_open&&(t.aldstat_is_first_open=!1),t.aldstat_duration+=Date.now()-t.aldstat_showtime,x(t,"app","unLaunch")},m=function(t,a){void 0!==wx.getShareInfo&&wx.getShareInfo({shareTicket:t,success:function(t){var s=getApp();w(s,"event","ald_share_"+a,JSON.stringify(t))}})},y=function(t){e(),this.aldstat=new r(this);var a=wx.getStorageSync("aldstat_src");a&&(this.aldstat_src=a);var o=s(this);this.aldstat_uuid=o,this.aldstat_timestamp=Date.now(),this.aldstat_showtime=Date.now(),this.aldstat_duration=0;var n=this;n.aldstat_refresh_count=0,n.aldstat_error_count=0,n.aldstat_bottom_count=0,n.aldstat_page_count=0,n.aldstat_first_page=0,n.aldstat_showoption=t;var _=function(){wx.getSystemInfo({success:function(t){n.aldstat_vsdk_version=void 0===t.SDKVersion?"1.0.0":t.SDKVersion,n.aldstat_phone_model=t.model,n.aldstat_pixel_ratio=t.pixelRatio,n.aldstat_window_width=t.windowWidth,n.aldstat_window_height=t.windowHeight,n.aldstat_language=t.language,n.aldstat_wechat_version=t.version},complete:function(){c(),d.getUserinfo&&l()}})},l=function(){f(function(t){var a=wx.getStorageSync("aldstat_uuid");t.userInfo.uu=a,console.log(t),g(t.userInfo,"GET","u.html")})},c=function(){wx.request({url:"https://"+i+".aldwx.com/l.php",data:{},method:"GET",success:function(t){t.data.success&&(n.aldstat_location_name=t.data.country+":"+t.data.province+":"+t.data.city)}})};!function(){wx.getNetworkType({success:function(t){n.aldstat_network_type=t.networkType},complete:_})}();var u=wx.getStorageSync("app_session_key_create_launch_upload");u?u>0&&"number"==typeof u&&(n.aldstat_access_token=""+Date.now()+Math.floor(1e7*Math.random())):n.aldstat_access_token=""+Date.now()+Math.floor(1e7*Math.random()),x(n,"app","launch"),void 0!==t&&void 0!==t.shareTicket&&m(t.shareTicket,"click")},S=function(t,a){var s=getApp();void 0===this.aldstat_error_count?this.aldstat_error_count=1:this.aldstat_error_count++,w(s,"event","ald_error_message",JSON.stringify(t))},x=function(t,a,e){var o=wx.getStorageSync("app_"+e+"_upload");if(!(!o&&"launch"!==e||1>o&&"number"==typeof o)){t.aldstat_duration+=Date.now()-t.aldstat_showtime;var n={ak:d.app_key,waid:d.appid,wst:d.appsecret,uu:s(t),at:t.aldstat_access_token,wsr:t.aldstat_showoption,st:t.aldstat_timestamp,dr:t.aldstat_duration,et:Date.now(),pc:t.aldstat_e_count,fp:t.aldstat_first_page,lp:t.aldstat_last_page,rc:t.aldstat_refresh_count,bc:t.aldstat_bottom_count,life:e,ec:t.aldstat_error_count,nt:t.aldstat_network_type,pm:t.aldstat_phone_model,wsdk:t.aldstat_vsdk_version,pr:t.aldstat_pixel_ratio,ww:t.aldstat_window_width,wh:t.aldstat_window_height,lang:t.aldstat_language,wv:t.aldstat_wechat_version,lat:t.aldstat_lat,lng:t.aldstat_lng,spd:t.aldstat_speed,v:l,ev:a};"launch"===e?u+=1:"show"===e?p+=1:h+=1,n.la_c=u,n.as_c=p,n.ah_c=h,t.page_share_count&&"number"==typeof t.page_share_count&&(n.sc=t.page_share_count),t.aldstat_is_first_open&&(n.ifo="true"),t.aldstat_location_name&&(n.ln=t.aldstat_location_name),t.aldstat_src&&(n.sr=t.aldstat_src),t.aldstat_qr&&(n.qr=t.aldstat_qr),t.ald_share_src&&(n.usr=t.ald_share_src),g(n,"GET","d.html")}},k=function(t){e(),this.aldstat_showtime=Date.now(),this.aldstat_showtime=Date.now(),this.aldstat_showoption=t;var a=wx.getStorageSync("app_session_key_create_show_upload");a&&a>0&&"number"==typeof a&&(this.aldstat_access_token=""+Date.now()+Math.floor(1e7*Math.random())),this.aldstat_duration+=Date.now()-this.aldstat_showtime,x(this,"app","show"),void 0!==t&&void 0!==t.shareTicket&&m(t.shareTicket,"click")},b=function(t,a){var s=this;s.aldstat_is_first_open&&(s.aldstat_is_first_open=!1),s.aldstat_duration+=Date.now()-s.aldstat_showtime,x(s,"app","hide")},D=App;App=function(t){o(t,"onLaunch",y),o(t,"onUnlaunch",v),o(t,"onShow",k),o(t,"onHide",b),o(t,"onError",S),D(t)};var T=function(t,a){var s=getApp();M(s,this,"hide")},A=function(t,a){var s=getApp();M(s,this,"unload")},q=function(t,a){var s=wx.getStorageSync("aldstat_src");void 0!==wx.showShareMenu&&wx.showShareMenu({withShareTicket:!0});var e=getApp();if(s&&(e.aldstat_src=s),!_(t)){void 0!==t.aldsrc&&(s?e.aldstat_qr=t.aldsrc:(wx.setStorageSync("aldstat_src",t.aldsrc),e.aldstat_src=t.aldsrc,e.aldstat_qr=t.aldsrc));wx.getStorageSync("aldstat_uuid");void 0!==t.ald_share_src&&(e.ald_share_src=t.ald_share_src),this.aldstat_page_args=JSON.stringify(t)}M(e,this,"load")},M=function(a,e,o){var n=wx.getStorageSync("page_"+o+"_upload");if(!(!n&&"show"!==o||1>n&&"number"==typeof n)){wx.getStorageSync(e.__route__);e.aldstat_start_time=Date.now(),e.aldstat_refresh_count=0,e.aldstat_error_count=0,e.aldstat_bottom_count=0,a.aldstat_page_count?a.aldstat_page_count++:a.aldstat_page_count=1,a.aldstat_first_page||(a.aldstat_first_page=e.__route__,e.aldstat_is_first_page=!0),a.aldstat_last_page=e.__route__;var r=t({uu:s(a),at:a.aldstat_access_token,wsr:a.aldstat_showoption,v:l,ak:d.app_key,ev:"page",st:e.aldstat_start_time,dr:Date.now()-e.aldstat_start_time,rc:e.aldstat_refresh_count,bc:e.aldstat_bottom_count,pp:e.__route__,life:o,sc:e.page_share_count,ec:e.aldstat_error_count,nt:a.aldstat_network_type,pm:a.aldstat_phone_model,pr:a.aldstat_pixel_ratio,ww:a.aldstat_window_width,wh:a.aldstat_window_height,lang:a.aldstat_language,wv:a.aldstat_wechat_version,lat:a.aldstat_lat,lng:a.aldstat_lng,spd:a.aldstat_speed},"v",l);e.aldstat_is_first_page&&(r.ifp="true"),a.aldstat_page_last_page&&(r.lp=a.aldstat_page_last_page),a.aldstat_location_name&&(r.ln=a.aldstat_location_name),e.aldstat_page_args&&(r.ag=e.aldstat_page_args),a.aldstat_src&&(r.sr=a.aldstat_src),a.aldstat_qr&&(r.qr=a.aldstat_qr),a.ald_share_src&&(r.usr=a.ald_share_src),a.aldstat_page_last_page=e.__route__,g(r,"GET","d.html")}},E=function(t,a){var s=getApp();M(s,this,"show")},I=function(t,a){var s=getApp();this.aldstat_refresh_count++,s.aldstat_refresh_count++},O=function(t,a){var s=getApp();this.aldstat_bottom_count++,s.aldstat_bottom_count++},G=Page,j=function(t,s){var e=getApp();if(void 0!==t){var o=wx.getStorageSync("aldstat_uuid"),n=N(t[1].path),r=wx.getStorageSync(o),_="";if("undefined"!==e.ald_share_src&&e.ald_share_src){_=e.ald_share_src;var l=_.split(",");l.length>=3&&(l.shift(),_=l.toString()),""!==_&&(_=_+","+o)}else _=wx.getStorageSync("aldstat_uuid");t[1].path+=Object.keys(n).length>0?"&ald_share_src="+_:"?ald_share_src="+_,""===r||void 0===r?(wx.setStorageSync(o,1),r=1,e.page_share_count=r):(r=parseInt(wx.getStorageSync(o))+1,e.page_share_count=r,wx.setStorageSync(o,r)),f(function(t){var a=wx.getStorageSync("aldstat_uuid");t.userInfo.uu=a,g(t.userInfo,"GET","u.html")});var i=t[1],d=t[1].success;void 0===t[1].success&&(d=function(t){});t[1].fail;return void 0===t[1].fail&&function(t){},t[1].success=function(t){new Array;if("object"==a(t.shareTickets))for(var s=0;s<t.shareTickets.length;s++)m(t.shareTickets[s],"user");w(e,"event","ald_share_status",JSON.stringify(t)),d(t)},t[1].fail=function(t){w(e,"event","ald_share_status","fail"),i.fail(t)},t[1]}},N=function(t){var a=new Object;if(-1!=t.indexOf("?"))for(var s=t.split("?")[1],e=s.split("&"),o=0;o<e.length;o++)a[e[o].split("=")[0]]=unescape(e[o].split("=")[1]);return a};Page=function(t){o(t,"onLoad",q),o(t,"onUnload",A),o(t,"onShow",E),o(t,"onHide",T),o(t,"onPullDownRefresh",I),o(t,"onReachBottom",O),n(t,"onShareAppMessage",j),G(t)}}()}(); 
 			}); 		define("utils/config.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
 !function(){"use strict";var A=void 0;A="sortime";module.exports={HOSTNAME:A,TALKING_DATA_APP_ID:"A967B0F5A44D420985D240A95E5E28FC",VERSION:"1.1.8"}}(); 
 			}); 		define("utils/dateutil.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
 !function(){"use strict";function t(t){var o=t.getFullYear(),r=t.getMonth()+1,a=t.getDate(),e=Math.floor((14-r)/12);return o=o+4800-e,r=r+12*e-3,a+Math.floor((153*r+2)/5)+365*o+Math.floor(o/4)-Math.floor(o/100)+Math.floor(o/400)-32045}module.exports={getJulianDay:t}}(); 
 			}); 		define("utils/http.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
 !function(){"use strict";function t(o){console.log("loginRepeat"),n(function(t){u.setAuthToken(t.data.auth_token);var n=t.data.currentUser.id;u.setUserID(n),console.log("onshow login success init"),o&&o(n)},function(){console.log("再登一次"),r-- >0?setTimeout(function(){t(o)},3e3):wx.showModal({title:"登录失败",content:"微信登录遇到问题，请稍后再试",confirmText:"再次尝试",success:function(t){function n(n){return t.apply(this,arguments)}return n.toString=function(){return t.toString()},n}(function(n){n.confirm&&(r=a,t(success))})})})}function n(t,n){wx.login({success:function(t){function n(n){return t.apply(this,arguments)}return n.toString=function(){return t.toString()},n}(function(o){var e=o.code;wx.getUserInfo({success:function(t){function n(n){return t.apply(this,arguments)}return n.toString=function(){return t.toString()},n}(function(o){console.log(),wx.request({url:s+"wechat/newtomato",method:"POST",data:{code:e,rawData:o.rawData,signature:o.signature,encryptedData:o.encryptedData,iv:o.iv},success:function(t){function n(n){return t.apply(this,arguments)}return n.toString=function(){return t.toString()},n}(function(o){console.log("登录信息:",o),"200"==o.statusCode?t&&t(o):n&&n()}),fail:function(){console.log("request failure"),n&&n()}})}),fail:function(){console.log("getUserInfo failure"),n&&n()}})}),fail:function(){console.log("wx.login failure"),n&&n()}})}function o(t,n,o,e){wx.request({url:s+"tomato/create",method:"POST",header:{"X-Auth-Token":u.getAuthToken(),"Content-Type":"application/json"},data:{type:t,period:n},success:function(t){"200"==t.statusCode&&(console.log(t.data),o&&o(t.data))},fail:e})}function e(t,n){wx.request({url:s+"tomato/complete/"+t,method:"POST",header:{"X-Auth-Token":u.getAuthToken(),"Content-Type":"application/json"},success:function(t){"200"==t.statusCode&&(console.log(t.data),n&&n(t.data))},fail:function(){}})}function i(t){wx.request({url:s+"tomato/list",method:"GET",header:{"X-Auth-Token":u.getAuthToken(),"Content-Type":"application/json"},success:function(n){"200"==n.statusCode&&(console.log(n.data),t&&t(n.data))},fail:function(){}})}var u=getApp(),c=require("config.js"),s="https://www."+c.HOSTNAME+".com/api/v2/",a=3,r=a;module.exports={loginRepeat:t,createClock:o,completeClock:e,statisticList:i}}(); 
 			}); 		define("app.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
 !function(){"use strict";function o(o,t,s){var e=o.globalData,a=/iphone/i,l=/plus/i;e.model=t,e.isIp=a.test(t),e.plusCls="",e.isIp&&l.test(t)&&(e.isIpP=!0,e.plusCls="b08"),e.borderWidthCls=e.isIp?"":"b1",s&&s.setData({borderWidthCls:e.borderWidthCls,plusCls:e.plusCls}),console.log("set isIp",e.borderWidthCls,e.plusCls,t)}var t=require("utils/config.js");require("utils/ald/ald-stat.js");App({onLaunch:function(){var o=void 0;"codoer"==t.HOSTNAME?o="开发环境":"36light"==t.HOSTNAME?o="测试环境":"sortime"==t.HOSTNAME&&(o="正式环境"),console.log("-------------------"),console.log("当前环境 : "+o),console.log("当前版本 : "+t.VERSION),console.log("-------------------")},onHide:function(){console.log("app on hide"),this.globalData.isTiming&&this.globalData.allowBGMusic&&wx.getBackgroundAudioPlayerState({success:function(o){var t=o.status;console.log("status",t),0==t&&wx.playBackgroundAudio({dataUrl:this.globalData.dataUrl,title:"番茄闹钟",coverImgUrl:"http://y.gtimg.cn/music/photo_new/T002R300x300M000003rsKF44GyaSk.jpg?max_age=2592000",success:function(){console.log("开始播放音乐了")},fail:function(){console.log("播放失败")}})}})},setAuthToken:function(o){this.globalData.authToken=o,wx.setStorageSync(this.globalData.host+"auth_token",o)},getAuthToken:function(){if(this.globalData.authToken)return this.globalData.authToken;var o=wx.getStorageSync(this.globalData.host+"auth_token");return this.globalData.authToken=o,o},setUserID:function(o){this.globalData.userID=o,wx.setStorageSync("user_id",o)},getUserID:function(){if(this.globalData.userID)return this.globalData.userID;var o=wx.getStorageSync("user_id");return this.globalData.userID=o,o},getUserInfo:function(o){var t=this;this.globalData.userInfo?"function"==typeof o&&o(this.globalData.userInfo):wx.login({success:function(){wx.getUserInfo({success:function(s){t.globalData.userInfo=s.userInfo,"function"==typeof o&&o(t.globalData.userInfo)}})}})},setSystemModel:function(t){var s=wx.getStorageSync("zxgn_sysmodel"),e=this;s?o(e,s,t):wx.getSystemInfo({success:function(s){wx.setStorageSync("zxgn_sysmodel",s.model),o(e,s.model,t)}})},globalData:{userInfo:null,task:{type:0,id:void 0},todayTasks:[],oneWeekTasks:[],tabIndex:0,isTiming:!1,allowBGMusic:!1,dataUrl:"http://oss.sortime.com/rain.m4a",log:{log_domain:"sortime",log_userid:"None",log_other:"None",log_version:"None",log_source:"fanqienz"},host:"https://www.sortime.com/"}})}(); 
 			}); 	require("app.js");
 		__wxRoute = 'pages/countTime/countTime';__wxRouteBegin = true; 	define("pages/countTime/countTime.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
 !function(){"use strict";function t(t){return"border-bottom: solid 2px "+J[t]+";"}function e(){var e=k.type;for(var a in Y)Y[a].textCls=q,Y[a].wrapperStyle="";Y[e].textCls=R,Y[e].wrapperStyle=t(e),C.setData({typeItems1:Y.slice(0,3),typeItems2:Y.slice(3)})}function a(){C.setData({tabIndex:L.globalData.tabIndex}),0==C.data.tabIndex&&(C.setData({hideCanvas:!0}),M&&(g(),setTimeout(function(){r()},0)))}function o(){C.setData({status:C.data.status+1})}function n(){function t(){M&&(0==v?(v=59,S-=1):v-=1,I+=1,g(),C.setData({time:d(S)+":"+d(v)}))}function e(){M&&(E=setTimeout(function(){0!=S||0!=v?(e(),t()):(g(),i())},1e3))}C.setData({time:d(S)+":"+d(v)}),e()}function s(){C.setData({countBtnText:"开始新番茄",countBtnAction:"bakcToView",countBtnCls:"bc-f c-1c3",statusText:"已完成",doneCountDown:!0}),wx.stopBackgroundAudio({dataUrl:z})}function i(){L.globalData.task.id?F.completeClock(L.globalData.task.id,function(t){s(),console.log("已向后台上传，完成番茄")}):(s(),console.log("没联网，完成番茄"))}function l(){console.log("play audio url = ",z),wx.playBackgroundAudio({dataUrl:z,title:"番茄闹钟",coverImgUrl:"http://y.gtimg.cn/music/photo_new/T002R300x300M000003rsKF44GyaSk.jpg?max_age=2592000",success:function(){console.log("开始播放音乐了")},fail:function(){console.log("播放失败")}})}function c(){C.data.allowBGMusic&&l(),C.setData({countBtnText:"暂停计时",countBtnAction:"pauseTiming",countBtnCls:"",statusText:"计时中",paused:!1}),M=!0,L.globalData.isTiming=M,setTimeout(function(){0==C.data.status&&o(),r()},0),n()}function r(){g()}function u(){C.setData({countBtnText:"继续计时",countBtnAction:"restartTiming",countBtnCls:"bc-f c-1c3",statusText:"已暂停",paused:!0}),M=!1,L.globalData.isTiming=M,g()}function g(){if((I=60*(B-S)+A-v)>W){U=0,C.setData({rightAnimationStyle:";transform: rotate(225deg); "});var t=I-W;P=1e3*(W-t),V=t/W*180+45,C.setData({leftAnimationStyle:";transform: rotate("+V+"deg); "})}else U=1e3*(W-I),P=1e3*W,V=I/W*180+45,C.setData({leftAnimationStyle:"",rightAnimationStyle:";transform: rotate("+V+"deg); "})}function p(t,e){C.setData({doneCountDown:!1}),S=t,v=e,B=S,A=v,G=60*S+v,W=G/2,g(),c()}function d(t){return t<10?"0"+t:t}function f(t){var e=[],a=[],o=0,n=0;for(n=0;n<7;++n)e.push(0),a.push(0);for(a.pop(),n=0;n<t.tomato_periods.length;++n){var s=t.tomato_periods[n];if(1==s.completed){var i=H.getJulianDay(new Date(s.created_at.split(" ")[0]))-H.getJulianDay(_);e[6+i]+=1,0==i&&(a[s.type]+=1),o+=1}}C.setData({totalSum:t.tomato_statistics.total_count,oneWeekTotal:o,weekDayAverage:0==o?0:(o/7).toFixed(1)}),L.globalData.todayTasks=a,L.globalData.oneWeekTasks=e,console.log("todayTasks",a,"oneWeekTasks",e)}function h(){var t=L.globalData;m(t.todayTasks,J),b(t.oneWeekTasks),F.statisticList(function(e){console.log("http",e),f(e),m(t.todayTasks,J),b(t.oneWeekTasks)}),C.setData({nyrDate:_.getFullYear()+"年"+d(_.getMonth()+1)+"月"+d(_.getDate())+"日"}),setTimeout(function(){C.setData({hideCanvas:!1})},0)}function m(t,e){var a=t.slice(0),o=wx.createCanvasContext("cricularCan"),n=[];if(o.setLineWidth(15),o.clearRect(0,0,134,134),0==a.length||0==a.reduce(function(t,e){return t+e}))C.setData({todaySum:0}),o.setStrokeStyle("#f0f0f0"),o.arc(67,67,52,0,2*Math.PI),o.stroke(),C.setData({typeWrapperCls:"flex-all",typeWrapperStyle:"",typeArr:K});else{for(var s=0,i=0,l=0;l<a.length;++l)i+=a[l],0==a[l]&&(s+=1);C.setData({todaySum:i});for(var c=Math.PI/90,r=c*(s==a.length-1?0:a.length-s),u=2*Math.PI-r,g=a.map(function(t){return u*t/i}),p=-1*Math.PI/2+(0==r?0:c),d=g.map(function(t){if(0!=t){var e=p;return p+=t+c,e}}),l=0;l<a.length;l++)void 0!=d[l]&&(n.push(K[l]),o.beginPath(),o.setStrokeStyle(e[l]),o.arc(67,67,52,d[l],d[l]+g[l]),o.stroke(),o.closePath());n.length;C.setData({typeWrapperCls:"",typeArr:n})}o.draw()}function b(t){if(0==t.length)for(var e=0;e<7;++e)t.push(0);var a=t.reduce(function(t,e){return t>e?t:e}),o=[];j=[];for(var e=0;e<t.length;++e){var n={wrapperCls:0==t[e]?"":";height: "+240*t[e]/a+"rpx;",value:t[e]};o.push(n),j.push(!0)}j[t.length-1]=!1;for(var s=[],i=_,l=i.getTime(),e=0;e<6;++e)s.unshift(i.getDate()),l-=864e5,i=new Date(l);s.unshift(i.getMonth()+1+"月"+i.getDate()+"日"),C.setData({hide:j,histogramArr:o,dateArr:s})}function w(){wx.pauseBackgroundAudio({dataUrl:z}),u()}function D(){C.setData({status:0,countBtnText:"暂停计时",countBtnAction:"pauseTiming",countBtnCls:"",animationCls:"",statusText:"计时中",doneCountDown:!1,paused:!1,totalSum:0,todaySum:0,oneWeekTotal:0,weekDayAverage:0,hideCanvas:!0,allowBGMusic:!0}),L.globalData.allowBGMusic=C.data.allowBGMusic}function y(){L.globalData.isTiming&&L.globalData.allowBGMusic&&wx.getBackgroundAudioPlayerState({success:function(t){var e=t.status;console.log("status",e),0==e&&l()}})}function x(){if(M){console.log("onhide");var t=+new Date;try{wx.setStorageSync("onHideTime",t),wx.setStorageSync("storedDiffSeconds",I)}catch(t){console.log("存储时间error",t)}}}function T(){if(M)try{console.log("onshow");var t=wx.getStorageSync("onHideTime"),e=wx.getStorageSync("storedDiffSeconds"),a=+new Date,o=parseInt((a-t)/1e3);I=e+o;var n=G-I;n<=0?(S=0,v=0):(S=parseInt(Math.floor(n/60)),v=n%60)}catch(t){console.log("获得时间error",t)}}var C,k,S,v,B,A,M,_,I,G,W,P,U,V,j,F=require("../../utils/http.js"),H=require("../../utils/dateutil.js"),L=getApp(),R="mt30",q="o4 mt30",J=["#6bbaff","#7ed321","#ff9d02","#34d5eb","#968bed","#ff4258"],K=[{typeCls:"bg-6bb",text:"工作"},{typeCls:"bg-7ed",text:"学习"},{typeCls:"bg-ffa",text:"思考"},{typeCls:"bg-33d",text:"写作"},{typeCls:"bg-968",text:"运动"},{typeCls:"bg-ff4",text:"阅读"}],Y=[{idx:0,wrapperCls:"h246 mw30 br-ee bb-ee bs-bb",wrapperStyle:t(0),imgCls:"w60 h60",imgSrc:"/images/icon_type_work.png",text:"工作",tapAction:"chooseType"},{idx:1,wrapperCls:"h246 mw30 br-ee bb-ee bs-bb",imgCls:"w60 h60",imgSrc:"/images/icon_type_learn.png",text:"学习",tapAction:"chooseType"},{idx:2,wrapperCls:"h246 mw30 bb-ee bs-bb",imgCls:"w60 h60",imgSrc:"/images/icon_type_think.png",text:"思考",tapAction:"chooseType"},{idx:3,wrapperCls:"h246 mw30 br-ee bs-bb",imgCls:"w60 h60",imgSrc:"/images/icon_type_write.png",text:"写作",tapAction:"chooseType"},{idx:4,wrapperCls:"h246 mw30 br-ee bs-bb",imgCls:"w60 h60",imgSrc:"/images/icon_type_sport.png",text:"运动",tapAction:"chooseType"},{idx:5,wrapperCls:"h246 mw30 bs-bb",imgCls:"w60 h60",imgSrc:"/images/icon_type_read.png",text:"阅读",tapAction:"chooseType"}],z=L.globalData.dataUrl,E=void 0;Page({data:{},onLoad:function(){C=this,D(),F.loginRepeat(function(t){var e=L.globalData.log;e.log_userid=t,C.setData({log:e})}),L.setSystemModel(C),k=L.globalData.task,_=new Date,e(),a()},onShow:function(){console.log("页面ohshow"),C.data.doneCountDown&&C.setData({countBtnText:"开始新番茄",countBtnAction:"bakcToView",countBtnCls:"bc-f c-1c3",statusText:"已完成"}),y(),T()},onHide:function(){y(),x()},showTiming:function(){0!=L.globalData.tabIndex&&(L.globalData.tabIndex=0,a())},showStatis:function(){1!=L.globalData.tabIndex&&(L.globalData.tabIndex=1,a(),h())},startTiming:function(){L.globalData.task.id=void 0,p(25,0),F.createClock(k.type,25,function(t){L.globalData.task.id=t.id},function(){console.log("开始番茄失败")})},chooseType:function(t){var a=t.currentTarget.dataset.id;a!=k.type&&(k.type=a,e())},pauseTiming:function(){w()},restartTiming:function(){c()},bakcToView:function(){this.setData({status:0})},giveUpTiming:function(){wx.stopBackgroundAudio({dataUrl:z}),u(),clearTimeout(E),this.setData({status:0})},showValue:function(t){var e=t.currentTarget.dataset.id;if(console.log(e),e){e=parseInt(e);for(var a in j)j[a]=a!=e;C.setData({hide:j}),console.log("hide",C.data.hide)}},allowMusic:function(){C.setData({allowBGMusic:!C.data.allowBGMusic}),L.globalData.allowBGMusic=C.data.allowBGMusic,C.data.allowBGMusic?M&&l():wx.pauseBackgroundAudio({dataUrl:z})},onShareAppMessage:function(){return{title:"微信上就能用的番茄闹钟",desc:"专注每个25分钟",path:"/pages/countTime/countTime"}}})}(); 
 			}); 	require("pages/countTime/countTime.js");
 		__wxRoute = 'pages/rest/rest';__wxRouteBegin = true; 	define("pages/rest/rest.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
 !function(){"use strict";function t(){n.setData({tabIndex:o.globalData.tabIndex})}var n,a,o=getApp();Page({data:{status:0,countBtnText:"暂停计时",countBtnAction:"stopTiming",countBtnCls:"",animationCls:"",statusText:"计时中",doneCountDown:!1},onLoad:function(){n=this,a=o.globalData.task,t()},onShareAppMessage:function(){return{title:"微信上就能用的番茄闹钟",desc:"专注每个25分钟",path:"/pages/countTime/countTime"}}})}(); 
 			}); 	require("pages/rest/rest.js");
 	